<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Open Graph Meta Tags -->
    <meta property="og:title" content="–ú—É–∑—ã–∫–∞–ª—å–Ω–∞—è –û—Ç–∫—Ä—ã—Ç–∫–∞ —Å –ò–ò üéµ" />
    <meta property="og:description"
        content="–£–Ω–∏–∫–∞–ª—å–Ω–æ–µ –∞—É–¥–∏–æ-–ø–æ–∑–¥—Ä–∞–≤–ª–µ–Ω–∏–µ, —Å–æ–∑–¥–∞–Ω–Ω–æ–µ —Å –ø–æ–º–æ—â—å—é –Ω–µ–π—Ä–æ—Å–µ—Ç–µ–π. –ù–∞–∂–º–∏—Ç–µ, —á—Ç–æ–±—ã –ø–æ—Å–ª—É—à–∞—Ç—å!" />
    <meta property="og:image"
        content="https://images.unsplash.com/photo-1514525253161-7a46d19cd819?q=80&w=1200&auto=format&fit=crop" />
    <meta property="og:type" content="website" />
    <title>–ú—É–∑—ã–∫–∞–ª—å–Ω–∞—è –û—Ç–∫—Ä—ã—Ç–∫–∞</title>
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&family=Outfit:wght@500;700&display=swap"
        rel="stylesheet">
    <!-- Main Styles -->
    <link rel="stylesheet" href="style.css">
    <!-- Phosphor Icons for premium icons -->
    <script src="https://unpkg.com/@phosphor-icons/web"></script>
    <!-- html2canvas for downloading cards -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
</head>

<body>
    <div class="app-container">
        <!-- Floating animated background elements -->
        <div class="blob blob-1"></div>
        <div class="blob blob-2"></div>
        <div class="blob blob-3"></div>

        <main class="glass-panel" id="main-panel">
            <header class="app-header">
                <i class="ph-fill ph-music-notes-simple logo-icon"></i>
                <h1>–ú—É–∑—ã–∫–∞–ª—å–Ω–∞—è –û—Ç–∫—Ä—ã—Ç–∫–∞</h1>
                <p class="subtitle">–°–æ–∑–¥–∞–π—Ç–µ –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–æ–µ –ø–æ–∑–¥—Ä–∞–≤–ª–µ–Ω–∏–µ —Å –ò–ò</p>
            </header>

            <!-- Loading State -->
            <div id="loading-state" class="hidden">
                <div class="loader-container">
                    <div class="waveform">
                        <div class="bar"></div>
                        <div class="bar"></div>
                        <div class="bar"></div>
                        <div class="bar"></div>
                        <div class="bar"></div>
                    </div>
                    <p class="loader-text">–ò–ò —Å–æ—á–∏–Ω—è–µ—Ç —Ö–∏—Ç—ã...</p>
                </div>
            </div>

            <!-- Result Card View -->
            <div id="result-view" class="hidden">
                <div class="result-card" id="card-to-download">
                    <div class="card-header">
                        <h2>–î–ª—è <span id="res-name" class="highlight-text editable-lyrics" contenteditable="true"
                                spellcheck="false" title="–ö–ª–∏–∫–Ω–∏—Ç–µ, —á—Ç–æ–±—ã –∏–∑–º–µ–Ω–∏—Ç—å –∏–º—è">–ò–º—è</span>!</h2>
                        <p id="res-occasion" class="occasion-tag editable-lyrics" contenteditable="true"
                            spellcheck="false" title="–ö–ª–∏–∫–Ω–∏—Ç–µ, —á—Ç–æ–±—ã –∏–∑–º–µ–Ω–∏—Ç—å –ø–æ–≤–æ–¥">–ü–æ–∑–¥—Ä–∞–≤–ª–µ–Ω–∏–µ</p>
                    </div>
                    <div class="song-lyrics-container">
                        <p id="song-lyrics" class="lyrics-text editable-lyrics" contenteditable="true"
                            spellcheck="false" title="–ù–∞–∂–º–∏—Ç–µ, —á—Ç–æ–±—ã –æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Ç–µ–∫—Å—Ç"></p>
                    </div>

                    <div class="audio-player-ui">
                        <button id="play-pause-btn" class="icon-btn pulse-glow">
                            <i class="ph-fill ph-pause"></i>
                        </button>
                        <div class="audio-info">
                            <span class="now-playing-label">–°–µ–π—á–∞—Å –∏–≥—Ä–∞–µ—Ç</span>
                            <span id="playing-melody-name" class="melody-name">–ú–µ–ª–æ–¥–∏—è</span>
                        </div>
                        <canvas id="visualizer" width="100" height="40"></canvas>
                    </div>
                </div>

                <div class="action-buttons">
                    <div class="voice-controls">
                        <select id="voice-select" class="voice-select" title="–í—ã–±–µ—Ä–∏—Ç–µ –≥–æ–ª–æ—Å –ò–ò">
                            <option value="EXAVITQu4vr4xnSDxMaL">–ñ–µ–Ω—Å–∫–∏–π (Bella)</option>
                            <option value="21m00Tcm4TlvDq8ikWAM">–ñ–µ–Ω—Å–∫–∏–π 2 (Rachel)</option>
                            <option value="ErXwobaYiN019PkySvjV">–ú—É–∂—Å–∫–æ–π (Antoni)</option>
                            <option value="VR6AewLTigWG4xSOukaG">–ú—É–∂—Å–∫–æ–π 2 (Arnold)</option>
                        </select>
                        <button id="voice-btn" class="btn action-btn voice-play-btn"><i
                                class="ph-bold ph-microphone-stage"></i> –ò–ò –û–∑–≤—É—á–∫–∞</button>
                    </div>
                    <button id="share-btn" class="btn action-btn"><i class="ph-bold ph-share-network"></i>
                        –ü–æ–¥–µ–ª–∏—Ç—å—Å—è</button>
                    <button id="copy-text-btn" class="btn action-btn"><i class="ph-bold ph-copy"></i>
                        –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å—Ç–∏—Ö</button>
                </div>

                <div id="social-panel" class="social-panel hidden">
                    <p class="social-title">–ò–ª–∏ –ø–µ—Ä–µ—à–ª–∏—Ç–µ —Ç–µ–∫—Å—Ç–æ–º:</p>
                    <div class="social-icons">
                        <button id="share-tg" class="social-btn tg" title="Telegram"><i
                                class="ph-fill ph-telegram-logo"></i></button>
                        <button id="share-wa" class="social-btn wa" title="WhatsApp"><i
                                class="ph-fill ph-whatsapp-logo"></i></button>
                        <button id="share-vb" class="social-btn vb" title="Viber"><i
                                class="ph-fill ph-phone-call"></i></button>
                        <button id="share-copy" class="social-btn copy" title="–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Ç–µ–∫—Å—Ç"><i
                                class="ph-bold ph-copy"></i></button>
                    </div>
                </div>

                <button id="create-new-btn" class="btn secondary-btn">–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é –æ—Ç–∫—Ä—ã—Ç–∫—É</button>
            </div>

            <!-- Creation Form View -->
            <form id="creation-form" class="creation-form">
                <div class="form-group">
                    <label for="recipient-name">–ö–æ–≥–æ –ø–æ–∑–¥—Ä–∞–≤–ª—è–µ–º?</label>
                    <div class="input-wrapper">
                        <i class="ph ph-user"></i>
                        <input type="text" id="recipient-name" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –ú–∞—Ä–∏—è" required>
                    </div>
                </div>

                <div class="form-group">
                    <label for="occasion">–ü–æ –∫–∞–∫–æ–º—É –ø–æ–≤–æ–¥—É?</label>
                    <div class="input-wrapper">
                        <i class="ph ph-confetti"></i>
                        <input type="text" id="occasion" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –î–µ–Ω—å –†–æ–∂–¥–µ–Ω–∏—è, 8 –ú–∞—Ä—Ç–∞" required>
                    </div>
                </div>

                <!-- Melody section moved down -->

                <div class="form-group">
                    <div class="segment-control">
                        <input type="radio" id="mode-ai" name="generation-mode" value="ai" checked>
                        <label for="mode-ai">‚ú® –ò–ò-–ü–æ—ç—Ç</label>

                        <input type="radio" id="mode-manual" name="generation-mode" value="manual">
                        <label for="mode-manual">‚úçÔ∏è –°–≤–æ–π —Å—Ç–∏—Ö</label>
                    </div>
                </div>

                <div class="form-group">
                    <label id="dictation-label" for="dictation">–ß—Ç–æ –ø–æ–∂–µ–ª–∞—Ç—å? <span id="mic-badge"
                            class="badge">–ì–æ–ª–æ—Å–æ–≤–æ–π –≤–≤–æ–¥</span></label>
                    <p id="dictation-helper" class="helper-text">–ù–∞–¥–∏–∫—Ç—É–π—Ç–µ —Å—É—Ç—å –ø–æ–∑–¥—Ä–∞–≤–ª–µ–Ω–∏—è, –∞ –ò–ò –ø—Ä–µ–≤—Ä–∞—Ç–∏—Ç —ç—Ç–æ –≤
                        –∫—Ä–∞—Å–∏–≤—É—é –ø–µ—Å–Ω—é.</p>
                    <div class="dictation-wrapper">
                        <textarea id="dictation" placeholder="–°–∫–∞–∂–∏—Ç–µ —á—Ç–æ-–Ω–∏–±—É–¥—å —Ç–µ–ø–ª–æ–µ..." rows="4"
                            required></textarea>
                        <button type="button" id="mic-btn" class="mic-btn" aria-label="–ù–∞—á–∞—Ç—å –∑–∞–ø–∏—Å—å">
                            <i class="ph-fill ph-microphone"></i>
                            <span class="pulse-ring"></span>
                        </button>
                    </div>
                    <div id="mic-status" class="status-text hidden">–°–ª—É—à–∞—é –≤–∞—Å...</div>
                </div>

                <div class="form-group">
                    <label>–§–æ–Ω–æ–≤–∞—è –º—É–∑—ã–∫–∞ (–ú–∏–Ω—É—Å)</label>
                    <div class="segment-control audio-tabs" style="margin-bottom: 12px;">
                        <input type="radio" id="src-catalog" name="audio-source" value="catalog" checked>
                        <label for="src-catalog"><i class="ph ph-list-music"></i> –ö–∞—Ç–∞–ª–æ–≥</label>

                        <input type="radio" id="src-upload" name="audio-source" value="upload">
                        <label for="src-upload"><i class="ph ph-upload-simple"></i> –§–∞–π–ª</label>

                        <input type="radio" id="src-link" name="audio-source" value="link">
                        <label for="src-link"><i class="ph ph-link"></i> –°—Å—ã–ª–∫–∞</label>
                    </div>

                    <div id="audio-catalog-wrapper" class="audio-input-view">
                        <div id="track-catalog" class="track-catalog-grid">
                            <!-- Tracks will be dynamically injected here by app.js -->
                        </div>
                    </div>

                    <div id="audio-upload-wrapper" class="audio-upload-dropzone audio-input-view hidden">
                        <input type="file" id="audio-file" accept=".mp3, .wav, audio/mpeg, audio/wav" class="hidden"
                            style="display: none;">
                        <label for="audio-file" class="upload-label"
                            style="cursor: pointer; width: 100%; display: flex; flex-direction: column; align-items: center; justify-content: center; min-height: 80px; border: 2px dashed rgba(255, 255, 255, 0.2); border-radius: 12px; background: rgba(0, 0, 0, 0.2); transition: all 0.3s ease;">
                            <i class="ph ph-upload-simple"
                                style="font-size: 1.5rem; margin-bottom: 8px; color: var(--primary-light);"></i>
                            <span id="upload-filename"
                                style="color: var(--text-secondary); font-size: 0.9rem; text-align: center; padding: 0 10px;">–ù–∞–∂–º–∏—Ç–µ,
                                —á—Ç–æ–±—ã –≤—ã–±—Ä–∞—Ç—å .mp3 —Ñ–∞–π–ª<br><small>(–¥–æ 15 –ú–ë)</small></span>
                        </label>
                    </div>

                    <div id="audio-link-wrapper" class="input-wrapper audio-input-view hidden">
                        <i class="ph ph-link"></i>
                        <input type="url" id="audio-link" placeholder="–í—Å—Ç–∞–≤—å—Ç–µ –ø—Ä—è–º—É—é —Å—Å—ã–ª–∫—É –Ω–∞ .mp3">
                    </div>
                </div>

                <button type="submit" id="generate-btn" class="btn primary-btn btn-glow">
                    <i class="ph-bold ph-magic-wand"></i>
                    –°–æ–∑–¥–∞—Ç—å –ú—É–∑—ã–∫–∞–ª—å–Ω—É—é –û—Ç–∫—Ä—ã—Ç–∫—É
                </button>
            </form>
        </main>
    </div>

    <!-- Hidden audio element -->
    <audio id="bg-audio" loop></audio>
    <audio id="voice-audio"></audio>

    <!-- Main Logic -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/lz-string/1.5.0/lz-string.min.js"></script>
    <script src="app.js"></script>
</body>

</html>
